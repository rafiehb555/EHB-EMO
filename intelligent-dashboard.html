<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EHB-5 Intelligent Dashboard - Auto-Error Recovery System</title>
    <link rel="stylesheet" href="advanced-styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <!-- Intelligent Header with Real-time Status -->
    <header class="header intelligent-header">
        <div class="logo">
            <i class="fas fa-brain"></i>
            <h1>EHB-5 Intelligent Dashboard</h1>
            <span class="version-badge">v2.0</span>
            <div class="system-status">
                <span class="status-indicator online" id="systemStatus">
                    <i class="fas fa-circle"></i> System Online
                </span>
            </div>
        </div>

        <nav class="nav">
            <a href="#overview" class="nav-link active">Overview</a>
            <a href="#error-handler" class="nav-link">Error Handler</a>
            <a href="#auto-recovery" class="nav-link">Auto Recovery</a>
            <a href="#monitoring" class="nav-link">Monitoring</a>
            <a href="#analytics" class="nav-link">Analytics</a>
            <a href="#settings" class="nav-link">Settings</a>
        </nav>

        <div class="header-actions">
            <button class="btn-notification" onclick="toggleNotifications()" title="Notifications">
                <i class="fas fa-bell"></i>
                <span class="notification-count" id="notificationCount">0</span>
            </button>
            <button class="btn-profile" onclick="openProfile()" title="User Profile">
                <i class="fas fa-user"></i>
            </button>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Overview Section -->
        <section id="overview" class="section active">
            <div class="section-header">
                <h2><i class="fas fa-tachometer-alt"></i> System Overview</h2>
                <div class="section-actions">
                    <button class="btn btn-primary" onclick="refreshSystem()" title="Refresh System">
                        <i class="fas fa-sync-alt"></i> Refresh
                    </button>
                    <button class="btn btn-secondary" onclick="forceRecovery()" title="Force Recovery">
                        <i class="fas fa-wrench"></i> Force Recovery
                    </button>
                </div>
            </div>

            <div class="overview-grid">
                <!-- System Health Cards -->
                <div class="card health-card">
                    <div class="card-header">
                        <h3><i class="fas fa-heartbeat"></i> System Health</h3>
                        <span class="health-score" id="healthScore">98%</span>
                    </div>
                    <div class="health-metrics">
                        <div class="metric-item">
                            <span class="metric-label">CPU Usage</span>
                            <span class="metric-value" id="cpuUsage">45%</span>
                            <div class="metric-bar">
                                <div class="metric-fill" style="width: 45%"></div>
                            </div>
                        </div>
                        <div class="metric-item">
                            <span class="metric-label">Memory Usage</span>
                            <span class="metric-value" id="memoryUsage">2.1GB</span>
                            <div class="metric-bar">
                                <div class="metric-fill" style="width: 65%"></div>
                            </div>
                        </div>
                        <div class="metric-item">
                            <span class="metric-label">Network</span>
                            <span class="metric-value" id="networkUsage">30%</span>
                            <div class="metric-bar">
                                <div class="metric-fill" style="width: 30%"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Error Handler Status -->
                <div class="card error-handler-card">
                    <div class="card-header">
                        <h3><i class="fas fa-shield-alt"></i> Error Handler</h3>
                        <span class="status-badge active" id="errorHandlerStatus">Active</span>
                    </div>
                    <div class="error-stats">
                        <div class="stat-item">
                            <span class="stat-value" id="errorsDetected">0</span>
                            <span class="stat-label">Errors Detected</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-value" id="errorsResolved">0</span>
                            <span class="stat-label">Errors Resolved</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-value" id="successRate">100%</span>
                            <span class="stat-label">Success Rate</span>
                        </div>
                    </div>
                    <div class="error-actions">
                        <button class="btn btn-sm btn-primary" onclick="viewErrorLog()">
                            <i class="fas fa-list"></i> View Log
                        </button>
                        <button class="btn btn-sm btn-secondary" onclick="clearErrorLog()">
                            <i class="fas fa-trash"></i> Clear Log
                        </button>
                    </div>
                </div>

                <!-- Auto Recovery Status -->
                <div class="card recovery-card">
                    <div class="card-header">
                        <h3><i class="fas fa-sync-alt"></i> Auto Recovery</h3>
                        <span class="status-badge active" id="recoveryStatus">Active</span>
                    </div>
                    <div class="recovery-stats">
                        <div class="stat-item">
                            <span class="stat-value" id="filesCreated">0</span>
                            <span class="stat-label">Files Created</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-value" id="dependenciesInstalled">0</span>
                            <span class="stat-label">Dependencies</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-value" id="operationsRetried">0</span>
                            <span class="stat-label">Operations Retried</span>
                        </div>
                    </div>
                    <div class="recovery-actions">
                        <button class="btn btn-sm btn-primary" onclick="checkMissingData()">
                            <i class="fas fa-search"></i> Check Data
                        </button>
                        <button class="btn btn-sm btn-secondary" onclick="validateSystem()">
                            <i class="fas fa-check"></i> Validate
                        </button>
                    </div>
                </div>

                <!-- Real-time Activity -->
                <div class="card activity-card">
                    <div class="card-header">
                        <h3><i class="fas fa-clock"></i> Real-time Activity</h3>
                        <span class="activity-indicator" id="activityIndicator">
                            <i class="fas fa-circle"></i> Live
                        </span>
                    </div>
                    <div class="activity-feed" id="activityFeed">
                        <div class="activity-item">
                            <i class="fas fa-check-circle text-success"></i>
                            <span>System initialized successfully</span>
                            <small>Just now</small>
                        </div>
                        <div class="activity-item">
                            <i class="fas fa-shield-alt text-info"></i>
                            <span>Error handler activated</span>
                            <small>2 minutes ago</small>
                        </div>
                        <div class="activity-item">
                            <i class="fas fa-sync-alt text-warning"></i>
                            <span>Auto recovery system ready</span>
                            <small>5 minutes ago</small>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Error Handler Section -->
        <section id="error-handler" class="section">
            <div class="section-header">
                <h2><i class="fas fa-exclamation-triangle"></i> Error Handler Dashboard</h2>
                <div class="section-actions">
                    <button class="btn btn-primary" onclick="testErrorHandler()">
                        <i class="fas fa-vial"></i> Test Handler
                    </button>
                    <button class="btn btn-secondary" onclick="exportErrorLog()">
                        <i class="fas fa-download"></i> Export Log
                    </button>
                </div>
            </div>

            <div class="error-handler-grid">
                <!-- Error Patterns -->
                <div class="card pattern-card">
                    <div class="card-header">
                        <h3><i class="fas fa-search"></i> Error Patterns</h3>
                    </div>
                    <div class="pattern-list" id="patternList">
                        <div class="pattern-item active">
                            <span class="pattern-name">Edit File Error</span>
                            <span class="pattern-count">0</span>
                            <span class="pattern-status resolved">Resolved</span>
                        </div>
                        <div class="pattern-item">
                            <span class="pattern-name">Search Replace Error</span>
                            <span class="pattern-count">0</span>
                            <span class="pattern-status resolved">Resolved</span>
                        </div>
                        <div class="pattern-item">
                            <span class="pattern-name">Linter Error</span>
                            <span class="pattern-count">0</span>
                            <span class="pattern-status resolved">Resolved</span>
                        </div>
                        <div class="pattern-item">
                            <span class="pattern-name">Network Error</span>
                            <span class="pattern-count">0</span>
                            <span class="pattern-status resolved">Resolved</span>
                        </div>
                        <div class="pattern-item">
                            <span class="pattern-name">Token Error</span>
                            <span class="pattern-count">0</span>
                            <span class="pattern-status resolved">Resolved</span>
                        </div>
                    </div>
                </div>

                <!-- Error Solutions -->
                <div class="card solution-card">
                    <div class="card-header">
                        <h3><i class="fas fa-tools"></i> Solution Strategies</h3>
                    </div>
                    <div class="solution-list" id="solutionList">
                        <div class="solution-item">
                            <span class="solution-name">Split Large Edit</span>
                            <span class="solution-success">100%</span>
                            <span class="solution-time">2.3s</span>
                        </div>
                        <div class="solution-item">
                            <span class="solution-name">Use Search Replace</span>
                            <span class="solution-success">95%</span>
                            <span class="solution-time">1.8s</span>
                        </div>
                        <div class="solution-item">
                            <span class="solution-name">Create Missing File</span>
                            <span class="solution-success">100%</span>
                            <span class="solution-time">0.5s</span>
                        </div>
                        <div class="solution-item">
                            <span class="solution-name">Fix Permissions</span>
                            <span class="solution-success">90%</span>
                            <span class="solution-time">1.2s</span>
                        </div>
                    </div>
                </div>

                <!-- Error Chart -->
                <div class="card chart-card">
                    <div class="card-header">
                        <h3><i class="fas fa-chart-line"></i> Error Trends</h3>
                        <div class="time-selector">
                            <button class="time-btn active" onclick="setTimeRange('1h')">1H</button>
                            <button class="time-btn" onclick="setTimeRange('24h')">24H</button>
                            <button class="time-btn" onclick="setTimeRange('7d')">7D</button>
                        </div>
                    </div>
                    <div class="chart-container">
                        <canvas id="errorChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <!-- Auto Recovery Section -->
        <section id="auto-recovery" class="section">
            <div class="section-header">
                <h2><i class="fas fa-magic"></i> Auto Recovery System</h2>
                <div class="section-actions">
                    <button class="btn btn-primary" onclick="forceRecovery()">
                        <i class="fas fa-bolt"></i> Force Recovery
                    </button>
                    <button class="btn btn-secondary" onclick="viewRecoveryQueue()">
                        <i class="fas fa-list"></i> View Queue
                    </button>
                </div>
            </div>

            <div class="recovery-grid">
                <!-- Missing Data Detection -->
                <div class="card detection-card">
                    <div class="card-header">
                        <h3><i class="fas fa-search"></i> Missing Data Detection</h3>
                        <span class="detection-status" id="detectionStatus">Active</span>
                    </div>
                    <div class="detection-list" id="detectionList">
                        <div class="detection-item">
                            <span class="detection-type">Configuration Files</span>
                            <span class="detection-count">0</span>
                            <span class="detection-status resolved">All Found</span>
                        </div>
                        <div class="detection-item">
                            <span class="detection-type">Dependencies</span>
                            <span class="detection-count">0</span>
                            <span class="detection-status resolved">All Installed</span>
                        </div>
                        <div class="detection-item">
                            <span class="detection-type">Environment Variables</span>
                            <span class="detection-count">0</span>
                            <span class="detection-status resolved">All Set</span>
                        </div>
                    </div>
                </div>

                <!-- Data Generators -->
                <div class="card generator-card">
                    <div class="card-header">
                        <h3><i class="fas fa-cogs"></i> Data Generators</h3>
                    </div>
                    <div class="generator-list" id="generatorList">
                        <div class="generator-item">
                            <span class="generator-name">Package.json</span>
                            <span class="generator-status ready">Ready</span>
                            <button class="btn btn-sm btn-primary" onclick="generatePackageJson()">
                                <i class="fas fa-plus"></i> Generate
                            </button>
                        </div>
                        <div class="generator-item">
                            <span class="generator-name">tsconfig.json</span>
                            <span class="generator-status ready">Ready</span>
                            <button class="btn btn-sm btn-primary" onclick="generateTsConfig()">
                                <i class="fas fa-plus"></i> Generate
                            </button>
                        </div>
                        <div class="generator-item">
                            <span class="generator-name">.env</span>
                            <span class="generator-status ready">Ready</span>
                            <button class="btn btn-sm btn-primary" onclick="generateEnvFile()">
                                <i class="fas fa-plus"></i> Generate
                            </button>
                        </div>
                        <div class="generator-item">
                            <span class="generator-name">README.md</span>
                            <span class="generator-status ready">Ready</span>
                            <button class="btn btn-sm btn-primary" onclick="generateReadme()">
                                <i class="fas fa-plus"></i> Generate
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Recovery Queue -->
                <div class="card queue-card">
                    <div class="card-header">
                        <h3><i class="fas fa-list-ol"></i> Recovery Queue</h3>
                        <span class="queue-count" id="queueCount">0</span>
                    </div>
                    <div class="queue-list" id="queueList">
                        <div class="queue-empty">
                            <i class="fas fa-check-circle"></i>
                            <span>No pending recovery tasks</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Monitoring Section -->
        <section id="monitoring" class="section">
            <div class="section-header">
                <h2><i class="fas fa-eye"></i> Real-time Monitoring</h2>
                <div class="section-actions">
                    <button class="btn btn-primary" onclick="startMonitoring()">
                        <i class="fas fa-play"></i> Start
                    </button>
                    <button class="btn btn-secondary" onclick="stopMonitoring()">
                        <i class="fas fa-stop"></i> Stop
                    </button>
                </div>
            </div>

            <div class="monitoring-grid">
                <!-- System Metrics -->
                <div class="card metrics-card">
                    <div class="card-header">
                        <h3><i class="fas fa-chart-bar"></i> System Metrics</h3>
                    </div>
                    <div class="metrics-grid">
                        <div class="metric-item">
                            <span class="metric-label">CPU Usage</span>
                            <span class="metric-value" id="cpuMetric">45%</span>
                            <div class="metric-bar">
                                <div class="metric-fill" style="width: 45%"></div>
                            </div>
                        </div>
                        <div class="metric-item">
                            <span class="metric-label">Memory Usage</span>
                            <span class="metric-value" id="memoryMetric">2.1GB</span>
                            <div class="metric-bar">
                                <div class="metric-fill" style="width: 65%"></div>
                            </div>
                        </div>
                        <div class="metric-item">
                            <span class="metric-label">Network I/O</span>
                            <span class="metric-value" id="networkMetric">30%</span>
                            <div class="metric-bar">
                                <div class="metric-fill" style="width: 30%"></div>
                            </div>
                        </div>
                        <div class="metric-item">
                            <span class="metric-label">Disk Usage</span>
                            <span class="metric-value" id="diskMetric">75%</span>
                            <div class="metric-bar">
                                <div class="metric-fill" style="width: 75%"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Performance Chart -->
                <div class="card performance-card">
                    <div class="card-header">
                        <h3><i class="fas fa-chart-line"></i> Performance Trends</h3>
                    </div>
                    <div class="chart-container">
                        <canvas id="performanceChart"></canvas>
                    </div>
                </div>

                <!-- Network Status -->
                <div class="card network-card">
                    <div class="card-header">
                        <h3><i class="fas fa-network-wired"></i> Network Status</h3>
                    </div>
                    <div class="network-status">
                        <div class="status-item">
                            <span class="status-label">Connection</span>
                            <span class="status-value online">Online</span>
                        </div>
                        <div class="status-item">
                            <span class="status-label">Latency</span>
                            <span class="status-value" id="latency">12ms</span>
                        </div>
                        <div class="status-item">
                            <span class="status-label">Bandwidth</span>
                            <span class="status-value" id="bandwidth">1.2GB/s</span>
                        </div>
                        <div class="status-item">
                            <span class="status-label">Errors</span>
                            <span class="status-value" id="networkErrors">0</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Analytics Section -->
        <section id="analytics" class="section">
            <div class="section-header">
                <h2><i class="fas fa-analytics"></i> Advanced Analytics</h2>
                <div class="section-actions">
                    <button class="btn btn-primary" onclick="exportAnalytics()">
                        <i class="fas fa-download"></i> Export
                    </button>
                    <button class="btn btn-secondary" onclick="generateReport()">
                        <i class="fas fa-file-alt"></i> Report
                    </button>
                </div>
            </div>

            <div class="analytics-grid">
                <!-- Error Analytics -->
                <div class="card analytics-card">
                    <div class="card-header">
                        <h3><i class="fas fa-chart-pie"></i> Error Distribution</h3>
                    </div>
                    <div class="chart-container">
                        <canvas id="errorDistributionChart"></canvas>
                    </div>
                </div>

                <!-- Recovery Analytics -->
                <div class="card analytics-card">
                    <div class="card-header">
                        <h3><i class="fas fa-chart-area"></i> Recovery Success Rate</h3>
                    </div>
                    <div class="chart-container">
                        <canvas id="recoveryChart"></canvas>
                    </div>
                </div>

                <!-- Performance Analytics -->
                <div class="card analytics-card">
                    <div class="card-header">
                        <h3><i class="fas fa-chart-bar"></i> System Performance</h3>
                    </div>
                    <div class="chart-container">
                        <canvas id="systemPerformanceChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <!-- Settings Section -->
        <section id="settings" class="section">
            <div class="section-header">
                <h2><i class="fas fa-cog"></i> System Settings</h2>
                <div class="section-actions">
                    <button class="btn btn-primary" onclick="saveSettings()">
                        <i class="fas fa-save"></i> Save
                    </button>
                    <button class="btn btn-secondary" onclick="resetSettings()">
                        <i class="fas fa-undo"></i> Reset
                    </button>
                </div>
            </div>

            <div class="settings-grid">
                <!-- Error Handler Settings -->
                <div class="card settings-card">
                    <div class="card-header">
                        <h3><i class="fas fa-shield-alt"></i> Error Handler Settings</h3>
                    </div>
                    <div class="settings-form">
                        <div class="form-group">
                            <label>Auto Recovery</label>
                            <input type="checkbox" id="autoRecovery" checked>
                        </div>
                        <div class="form-group">
                            <label>Max Retries</label>
                            <input type="number" id="maxRetries" value="5" min="1" max="10">
                        </div>
                        <div class="form-group">
                            <label>Retry Delay (ms)</label>
                            <input type="number" id="retryDelay" value="2000" min="500" max="10000">
                        </div>
                        <div class="form-group">
                            <label>Error Logging</label>
                            <input type="checkbox" id="errorLogging" checked>
                        </div>
                    </div>
                </div>

                <!-- Monitoring Settings -->
                <div class="card settings-card">
                    <div class="card-header">
                        <h3><i class="fas fa-eye"></i> Monitoring Settings</h3>
                    </div>
                    <div class="settings-form">
                        <div class="form-group">
                            <label>Real-time Monitoring</label>
                            <input type="checkbox" id="realTimeMonitoring" checked>
                        </div>
                        <div class="form-group">
                            <label>Check Interval (ms)</label>
                            <input type="number" id="checkInterval" value="1000" min="500" max="5000">
                        </div>
                        <div class="form-group">
                            <label>Performance Alerts</label>
                            <input type="checkbox" id="performanceAlerts" checked>
                        </div>
                        <div class="form-group">
                            <label>Network Monitoring</label>
                            <input type="checkbox" id="networkMonitoring" checked>
                        </div>
                    </div>
                </div>

                <!-- Notification Settings -->
                <div class="card settings-card">
                    <div class="card-header">
                        <h3><i class="fas fa-bell"></i> Notification Settings</h3>
                    </div>
                    <div class="settings-form">
                        <div class="form-group">
                            <label>Error Notifications</label>
                            <input type="checkbox" id="errorNotifications" checked>
                        </div>
                        <div class="form-group">
                            <label>Success Notifications</label>
                            <input type="checkbox" id="successNotifications" checked>
                        </div>
                        <div class="form-group">
                            <label>Sound Alerts</label>
                            <input type="checkbox" id="soundAlerts" checked>
                        </div>
                        <div class="form-group">
                            <label>Desktop Notifications</label>
                            <input type="checkbox" id="desktopNotifications" checked>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Notification System -->
    <div id="notification" class="notification">
        <div class="notification-content">
            <span id="notificationText"></span>
            <button class="notification-close" onclick="hideNotification()">
                <i class="fas fa-times"></i>
            </button>
        </div>
    </div>

    <!-- Modal System -->
    <div id="modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">Modal Title</h3>
                <button class="modal-close" onclick="closeModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body" id="modalBody"></div>
            <div class="modal-footer" id="modalFooter"></div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="cursor-error-handler.js"></script>
    <script src="auto-recovery-system.js"></script>
    <script src="intelligent-dashboard.js"></script>
</body>
</html>
